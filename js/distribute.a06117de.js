(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["distribute"],{ed89:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"distribute",staticStyle:{height:"100%"}},[s("DistributeFilters",{attrs:{loadNextPage:e.loadNextPage}}),e.isLargeLoading?s("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),e.noRecordsFound?s("v-container",{staticClass:"text-center py-10"},[e._v(" No books found in stock. ")]):e._e(),s("div",{directives:[{name:"bar",rawName:"v-bar"}],ref:"scrollable",staticClass:"books-listing-parent"},[s("div",[s("v-container",{class:[e.isEmpty?"d-none":"",e.loadedAll?"":"pull-up-margin"]},[s("v-row",e._l(e.data,(function(e){return s("BookCard",{key:e._id,attrs:{book:e,type:"distribute",sm:"6",xs:"12",md:"4",lg:"4",cols:"12"}})})),1)],1),e.loadedAll?e._e():s("SkeltonLoader")],1)])],1)},i=[],r=s("6211"),l=s("475c"),o=s("2ab4"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-btn",{staticClass:"search-bar-toggle d-md-none",on:{click:function(t){return e.toggleFilterOnXs()}}},[s("v-icon",[e._v("mdi-dots-horizontal")])],1),s("v-sheet",{class:["books-filters-parent",e.showFilterOnXs?"show":""],attrs:{outlined:""}},[s("div",{class:["px-6 pt-2 d-flex justify-end align-center mb-2"],staticStyle:{height:"30px"}},[e.mlState.libraryParent?e._e():s("v-checkbox",{staticClass:"mt-3 mr-2 caption",attrs:{dense:"",label:"Distribute to Sub Library"},model:{value:e.toSubLibrary,callback:function(t){e.toSubLibrary=t},expression:"toSubLibrary"}}),e.selectedBooks.length>0?s("v-dialog",{attrs:{"max-width":"950"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[s("v-badge",{staticClass:"float-right",attrs:{bordered:"",left:"",content:e.selectedBooks.length,overlap:""}},[s("v-btn",e._g(e._b({staticClass:"px-4 ml-2",attrs:{tile:"","x-small":"",color:"primary"}},"v-btn",i,!1),a),[e._v(" Selected Books ")])],1)]}},{key:"default",fn:function(t){return[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Selected books to distribute")]),s("smooth-scrollbar",[s("div",{staticClass:"selectedBooksRow"},[s("v-row",{staticClass:"pt-6 px-2 mx-0"},e._l(e.selectedBooksDetails,(function(e){return s("BookCard",{key:e._id,attrs:{book:e,type:"distribute",sm:"6",xs:"12",md:"4",lg:"4",cols:"12"}})})),1)],1)]),s("v-card-actions",{staticClass:"justify-end pb-4"},[s("v-btn",{attrs:{tile:"",color:"primary"},on:{click:function(t){return e.resetSelectedBooks()}}},[e._v("Clear all")]),s("v-btn",{attrs:{tile:"",color:"primary"},on:{click:function(e){t.value=!1}}},[e._v("Close")])],1)],1)]}}],null,!1,619566045)}):e._e(),s("v-btn",{staticClass:"ml-2",attrs:{tile:"","x-small":""},on:{click:function(t){return e.resetFilter()}}},[e._v("Reset")]),s("v-btn",{staticClass:"ml-2 d-md-none",attrs:{tile:"","x-small":""},on:{click:function(t){return e.toggleFilterOnXs()}}},[e._v("Hide")])],1),s("div",{class:["d-flex","align-center"]},[s("v-row",{staticClass:"mx-0 px-4 pt-2"},[s("v-col",{staticClass:"px-0 py-0 my-0",attrs:{xl:e.toSubLibrary?10:7,md:e.toSubLibrary?10:7,sm:"12",cols:"12"}},[e.toSubLibrary?s("v-select",{staticClass:"mx-2 mt-0",attrs:{dense:"",loading:!e.isSubLibrariesLoaded,items:e.subLibraries,"item-text":"name","item-value":"_id",label:"Select a sub library to distribute books",clearable:""},model:{value:e.subLibrary,callback:function(t){e.subLibrary=t},expression:"subLibrary"}}):s("v-autocomplete",{staticClass:"mx-2 mt-0",attrs:{clearable:"",items:e.membersData,loading:e.isMemberLoading,"search-input":e.memberSearchKey,filter:e.filterMembers,"item-text":"name","item-value":"_id",placeholder:"Balavedhi"===e.distributionType?"Select a member to distribute books":"",dense:""},on:{"update:searchInput":function(t){e.memberSearchKey=t},"update:search-input":function(t){e.memberSearchKey=t}},scopedSlots:e._u([{key:"label",fn:function(){return["Balavedhi"===e.distributionType?s("span",{staticClass:"warning--text"},[e._v("Listed members: under 18 only.")]):s("span",[e._v("Select a member to distribute books")])]},proxy:!0},{key:"item",fn:function(t){return[s("v-list-item-content",[s("v-list-item-title",{domProps:{innerHTML:e._s("# "+t.item.memberNumber+" "+t.item.name)}})],1)]}}],null,!1,4108958713),model:{value:e.member,callback:function(t){e.member=t},expression:"member"}})],1),e.toSubLibrary?e._e():s("v-col",{staticClass:"px-0 py-0 my-0",attrs:{xl:"3",md:"3",sm:"12",cols:"12"}},[s("v-select",{staticClass:"mx-2 mt-0",attrs:{dense:"",items:["General","Balavedhi","Reference","E-Reader"],label:"Distribution Type"},model:{value:e.distributionType,callback:function(t){e.distributionType=t},expression:"distributionType"}})],1),s("v-col",{staticClass:"px-0 py-0 my-0",attrs:{xl:"2",md:"2",sm:"12",cols:"12"}},[s("div",{staticClass:"mx-2"},[s("v-dialog",{attrs:{"max-width":"600"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[s("v-btn",e._g(e._b({attrs:{color:"success",width:"100%",small:"",tile:"",disabled:!e.selectedmember&&!e.toSubLibrary||!e.selectedsubLibrary&&e.toSubLibrary||0===e.selectedBooks.length},on:{click:e.resetDistributeTime}},"v-btn",i,!1),a),[e._v(" Distribute ")])]}},{key:"default",fn:function(t){return[e.selectedBooks.length>0&&(e.selectedmember||e.selectedsubLibrary)?s("v-card",[e.toSubLibrary?s("v-toolbar",{attrs:{dense:"",color:"warning",dark:""}},[e._v("This distribution is done to a Sub Library")]):s("v-toolbar",{attrs:{dense:"",color:"primary",dark:""}},[e._v("Confirm distribution ?")]),!e.toSubLibrary&&e.selectedmember?s("div",{staticClass:"text--primary pt-6 px-4"},[e._v(" Are you sure to distribute the following book"+e._s(e.selectedBooks.length>1?"s":"")+" to member "),s("b",[e._v(e._s(e.selectedmember.name)+"?")])]):e.selectedsubLibrary?s("div",{staticClass:"text--primary pt-6 px-4"},[e._v(" Are you sure to distribute the following book"+e._s(e.selectedBooks.length>1?"s":"")+" to sub library "),s("b",[e._v(e._s(e.selectedsubLibrary.name))])]):e._e(),s("div",{staticClass:"px-4 pt-2 pb-4"},[s("v-menu",{ref:"distributeOnMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[s("v-text-field",e._g(e._b({staticClass:"mt-6 my-0",attrs:{dense:"",label:"Distribution Date","append-icon":"mdi-calendar",readonly:""},model:{value:e.distributeDateText,callback:function(t){e.distributeDateText=t},expression:"distributeDateText"}},"v-text-field",i,!1),a))]}}],null,!0),model:{value:e.distributeOnMenu,callback:function(t){e.distributeOnMenu=t},expression:"distributeOnMenu"}},[s("v-date-picker",{attrs:{max:e.purchaseFilterMaxDate,"no-title":"",min:"1950-01-01",scrollable:""},on:{change:function(t){return e.$refs.distributeOnMenu.save(e.distributeDate)}},model:{value:e.distributeDate,callback:function(t){e.distributeDate=t},expression:"distributeDate"}})],1),s("v-menu",{ref:"distributeOnTimeMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[s("v-text-field",e._g(e._b({staticClass:"mt-6 my-0",attrs:{dense:"",label:"Distribution Time","append-icon":"mdi-clock-outline",readonly:""},model:{value:e.distributeTimeText,callback:function(t){e.distributeTimeText=t},expression:"distributeTimeText"}},"v-text-field",i,!1),a))]}}],null,!0),model:{value:e.distributeOnTimeMenu,callback:function(t){e.distributeOnTimeMenu=t},expression:"distributeOnTimeMenu"}},[s("v-time-picker",{attrs:{"no-title":"",scrollable:"",format:"ampm",landscape:""},on:{change:function(t){return e.$refs.distributeOnTimeMenu.save(e.distributeTime)}},model:{value:e.distributeTime,callback:function(t){e.distributeTime=t},expression:"distributeTime"}})],1)],1),s("smooth-scrollbar",[s("div",{staticStyle:{"max-height":"180px"}},[s("v-row",{staticClass:"px-4",attrs:{"no-gutters":""}},[s("div",e._l(e.selectedBooksDetails,(function(t){return s("v-chip",{key:t._id,staticClass:"mr-1 mb-2"},[e._v(" "+e._s(t.name)+" ")])})),1)])],1)]),s("v-card-actions",{staticClass:"justify-end pb-4"},[s("v-btn",{attrs:{small:"",tile:"",color:"primary"},on:{click:function(e){t.value=!1}}},[e._v("Cancel")]),s("v-btn",{attrs:{small:"",tile:"",color:"success"},on:{click:function(s){e.initiateDistribute((function(){return t.value=!1}))}}},[e._v("Continue")])],1)],1):e._e()]}}])})],1)])],1)],1),s("div",{class:["d-flex","align-center"]},[s("v-row",{staticClass:"mx-0 px-4"},[s("v-col",{staticClass:"px-0 py-0 my-0",attrs:{xl:"5",md:"5",sm:"12",cols:"12"}},[s("v-text-field",{ref:"searchInput",staticClass:"mx-2",attrs:{clearable:"",dense:"","append-icon":"mdi-magnify",label:"Search"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1),s("v-col",{staticClass:"px-0 py-0 my-0",attrs:{xl:"3",md:"3",sm:"12",cols:"12"}},[s("v-select",{staticClass:"mx-2",attrs:{dense:"",items:e.searchByFilters,"item-text":"name","item-value":"_id",label:"Search By",clearable:""},model:{value:e.searchBy,callback:function(t){e.searchBy=t},expression:"searchBy"}})],1),s("v-col",{staticClass:"px-0 py-0 my-0",attrs:{xl:"2",md:"2",sm:"12",cols:"12"}},[s("vc-data-autocomplete",{staticClass:"mx-2",attrs:{disabled:"E-Reader"===e.distributionType||"Reference"===e.distributionType,api:"/book/type","map-value":"name","emit-on-search":"",clearable:"",dense:"",label:"Category"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),s("v-col",{staticClass:"px-0 py-0 my-0",attrs:{xl:"2",md:"2",sm:"12",cols:"12"}},[s("v-select",{staticClass:"mx-2",attrs:{dense:"",items:e.searchByOrder,"item-text":"name","item-value":"orderBy",label:"Order by"},model:{value:e.orderBy,callback:function(t){e.orderBy=t},expression:"orderBy"}})],1)],1)],1)])],1)},c=[],d={setup:r["f"],props:["loadNextPage"],components:{BookCard:l["a"]}},u=d,b=s("2877"),m=s("6544"),v=s.n(m),p=s("c6a6"),y=s("4ca6"),x=s("8336"),f=s("b0af"),k=s("99d9"),h=s("ac7c"),_=s("cc20"),C=s("62ad"),g=s("2e4b"),S=s("169a"),T=s("132d"),L=s("5d23"),B=s("e449"),w=s("0fd9"),D=s("b974"),V=s("8dd9"),O=s("8654"),M=s("c964"),F=s("71d9"),R=Object(b["a"])(u,n,c,!1,null,null,null),P=R.exports;v()(R,{VAutocomplete:p["a"],VBadge:y["a"],VBtn:x["a"],VCard:f["a"],VCardActions:k["a"],VCheckbox:h["a"],VChip:_["a"],VCol:C["a"],VDatePicker:g["a"],VDialog:S["a"],VIcon:T["a"],VListItemContent:L["a"],VListItemTitle:L["c"],VMenu:B["a"],VRow:w["a"],VSelect:D["a"],VSheet:V["a"],VTextField:O["a"],VTimePicker:M["a"],VToolbar:F["a"]});var A={setup:r["e"],components:{BookCard:l["a"],SkeltonLoader:o["a"],DistributeFilters:P}},K=A,N=s("a523"),j=s("8e36"),E=Object(b["a"])(K,a,i,!1,null,null,null);t["default"]=E.exports;v()(E,{VContainer:N["a"],VProgressLinear:j["a"],VRow:w["a"]})}}]);
//# sourceMappingURL=distribute.a06117de.js.map